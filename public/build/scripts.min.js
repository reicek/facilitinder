// facilitinder - 1.0.1@ 2016-01-26var facilitinder=angular.module("facilitinder",["ngRoute","googleplus","uiGmapgoogle-maps","geolocation","firebase"]);facilitinder.factory("eventosDataRef",function(a,b){"use strict";var c=new Firebase("https://facilitinder.firebaseio.com/facilitadores");return c}),facilitinder.factory("eventosDataRef",function(a){"use strict";var b=new Firebase("https://facilitinder.firebaseio.com/eventos");return b}),facilitinder.factory("nuevoEvento",function(){"use strict";var a={};return a}),facilitinder.controller("WelcomeController",function(a,b,c){"use strict";a.user=c,$(".button-collapse").sideNav(),$(".parallax").parallax()}),facilitinder.config(function(a){"use strict";a.configure({key:"AIzaSyAMS8_CXrNWArLErVQh_o168U_jvOqc6tQ",v:"3.20",libraries:"visualization"})}),facilitinder.controller("EventsController",function(a,b,c,d,e,f,g){"use strict";d(),a.user=e,a.eventos=b(g),c.then(function(b){a.map={center:{latitude:37.422,longitude:-122.084},zoom:8}});var h={};f.getLocation().then(function(b){h={lat:b.coords.latitude,lng:b.coords.longitude},c.then(function(b){a.map={center:{latitude:h.lat,longitude:h.lng},zoom:8}})})}),facilitinder.factory("userData",function(){"use strict";var a={nombre:"",apellido:"",nombreCompleto:"",foto:"",email:"",twitter:"",actual:"",preferidas:"",facilitados:""};return a}),facilitinder.controller("UserController",function(a,b){"use strict";a.user=b}),facilitinder.controller("AuthCtrl",function(a,b,c){"use strict";a.login=function(){b.login().then(function(a){b.getUser().then(function(a){var b=$("<span>Bienvenido "+a.name+'<img ng-show="user.imagen" src="'+a.picture+'" class="circle responsive-img" style="height:4em"><span>');Materialize.toast(b,5e3),c.nombre=a.given_name,c.apellido=a.family_name,c.nombreCompleto=a.name,c.foto=a.picture})},function(a){console.log(a)})}}),facilitinder.config(["GooglePlusProvider",function(a){"use strict";a.init({clientId:"921475310202-hhvfv5glqt0vqm8nohq4da284s6c510s.apps.googleusercontent.com",apiKey:"AIzaSyAMS8_CXrNWArLErVQh_o168U_jvOqc6tQ"})}]),facilitinder.service("routeTest",function(a,b){"use strict";return b.nombre?void 0:a.path("/")}),facilitinder.config(function(a){"use strict";a.when("/welcome",{controller:"WelcomeController",templateUrl:"html/welcome.html"}).when("/profile",{controller:"ProfileController",templateUrl:"html/profile.html"}).when("/events",{controller:"EventsController",templateUrl:"html/events.html"}).when("/events/new",{controller:"NewController",templateUrl:"html/new.html"}).otherwise({redirectTo:"/welcome"})}),facilitinder.controller("ProfileController",function(a,b,c){"use strict";b(),a.user=c}),facilitinder.controller("NewController",function(a,b,c,d,e,f){"use strict";c(),a.user=d,a.evento=e;var g=b(f);a.eventos=g,a.agregarEvento=function(){a.evento.timestamp=Firebase.ServerValue.TIMESTAMP,a.evento.addedByUser=d.nombreCompleto,a.evento.addedByPic=d.foto,g.$add(a.evento).then(function(){e={},a.evento={};var b=$('<span><i class="material-icons">done</i> Registramos tu evento  '+d.nombre+" <span>");Materialize.toast(b,5e3)})}});